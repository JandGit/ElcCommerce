package com.android.tkengine.elccommerce.utils;import android.content.Context;import android.graphics.drawable.ColorDrawable;import android.support.v7.app.AppCompatActivity;import android.view.LayoutInflater;import android.view.MotionEvent;import android.view.View;import android.view.WindowManager;import android.widget.EditText;import android.widget.ImageView;import android.widget.PopupWindow;import android.widget.TextView;import com.android.tkengine.elccommerce.R;/** * Created by FangYu on 2016/8/11. */public class AddCartPopupWindow extends PopupWindow {    private static final String TAG = "AddCartPopupWindow" ;    private View mView;    public ImageView close;    TextView sub, add, sure;    EditText number;    public  AddCartPopupWindow (AppCompatActivity context, View.OnClickListener itemsOnClick){        super(context);        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);        mView = inflater.inflate(R.layout.add_cart, null);        close = (ImageView) mView.findViewById(R.id.add_cart_close);        sub = (TextView) mView.findViewById(R.id.add_cart_sub);        add = (TextView) mView.findViewById(R.id.add_cart_add);        number = (EditText) mView.findViewById(R.id.add_cart_number);        sure = (TextView) mView.findViewById(R.id.add_cart_sure);        close.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                dismiss();            }        });       this.setContentView(mView);        this.setWidth(WindowManager.LayoutParams.MATCH_PARENT);        this.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);        this.setFocusable(true);        ColorDrawable dw = new ColorDrawable(0xb0000000);        this.setBackgroundDrawable(dw);        sub.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                int i = Integer.parseInt(number.getText().toString()) ;                if(i>1){                    number.setText((i - 1)+"");                }            }        });        add.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                int i = Integer.parseInt(number.getText().toString()) + 1;                number.setText(i+"");            }        });        sure.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                dismiss();            }        });//        mView.setOnTouchListener(new View.OnTouchListener() {//            @Override//            public boolean onTouch(View view, MotionEvent motionEvent) {//                int height = (int) mView.findViewById(R.id.add_cart_close).getY();//                int y = (int) motionEvent.getY();//                if(motionEvent.getAction() == MotionEvent.ACTION_UP){//                    if (y < height)//                        dismiss();//                }//                return false;//            }//        });    }}