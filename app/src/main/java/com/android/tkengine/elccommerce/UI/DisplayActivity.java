package com.android.tkengine.elccommerce.UI;import android.os.Build;import android.os.Bundle;import android.support.annotation.Nullable;import android.support.v4.view.ViewPager;import android.support.v7.app.AppCompatActivity;import android.support.v7.widget.LinearLayoutManager;import android.support.v7.widget.RecyclerView;import android.util.Log;import android.view.Gravity;import android.view.View;import android.view.WindowManager;import android.widget.Button;import android.widget.ImageView;import android.widget.TextView;import com.android.tkengine.elccommerce.R;import com.android.tkengine.elccommerce.beans.GoodsDetailsBean;import com.android.tkengine.elccommerce.model.ElcModel;import com.android.tkengine.elccommerce.presenter.DisplayPresenter;import com.android.tkengine.elccommerce.utils.AddCartPopupWindow;import com.android.tkengine.elccommerce.utils.Indicator;import java.util.List;/** * Created by FangYu on 2016/8/9. */public class DisplayActivity extends AppCompatActivity {    ViewPager goodsPager;    DisplayPresenter presenter;    RecyclerView goodsContent;    DisplayPresenter.DisplayAdapter mDisplayAdapter;    ImageView titleBack,titleMessage;    Button lookEvaluation, goStore;    TextView addCart, purchaseIm;    AddCartPopupWindow addCartPopupWindow;    GoodsDetailsBean data = new GoodsDetailsBean();    private View.OnClickListener itemsOnclick = new View.OnClickListener() {        @Override        public void onClick(View view) {            addCartPopupWindow.dismiss();        }    };    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_display);        //实现沉浸式状态栏        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT){            getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);        }        initView();        initPresenter();    }    private void initPopupWindow() {        addCartPopupWindow = new AddCartPopupWindow(DisplayActivity.this, itemsOnclick);        addCartPopupWindow.showAtLocation(DisplayActivity.this.findViewById(R.id.hey), Gravity.BOTTOM|Gravity.CENTER_HORIZONTAL, 0, 0);    }    private void initPresenter() {        final ElcModel mModel= new ElcModel(DisplayActivity.this);        presenter = new DisplayPresenter();        presenter.clickBack(DisplayActivity.this, titleBack);        presenter.clickBack(DisplayActivity.this, titleMessage);        mDisplayAdapter = presenter.new DisplayAdapter(DisplayActivity.this);        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this,LinearLayoutManager.VERTICAL, false);        goodsContent.setAdapter(mDisplayAdapter);        goodsContent.setLayoutManager(linearLayoutManager);    }    private void initView() {        titleBack = (ImageView) findViewById(R.id.title_back);        goodsPager = (ViewPager) findViewById(R.id.goods_pager);        goodsContent = (RecyclerView) findViewById(R.id.goods_content);        titleMessage = (ImageView) findViewById(R.id.title_message);        lookEvaluation = (Button) findViewById(R.id.all_evaluation);        goStore = (Button) findViewById(R.id.all_goods);        addCart = (TextView) findViewById(R.id.add_cart);        purchaseIm = (TextView) findViewById(R.id.purchase_imm);        addCart.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                initPopupWindow();            }        });    }    @Override    protected void onDestroy() {        Indicator.onFinish();        super.onDestroy();    }}